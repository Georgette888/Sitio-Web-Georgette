<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Georgette Mora ‚Äì Abogada</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    header {
      background: url('reloj-portada.jpg') no-repeat center 40%/cover;
      color: white;
      text-align: center;
      padding: 120px 20px;
    }
    nav {
      background: #004d40;
      padding: 10px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    nav a {
      color: white;
      margin: 0 10px;
      text-decoration: none;
      font-weight: bold;
    }
    section {
      padding: 50px 20px;
      background: white;
      margin: 0 auto;
      max-width: 900px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 8px;
      margin-bottom: 40px;
    }
    h2 {
      color: #004d40;
    }
    .btn {
      background-color: #036f4a;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <header id="inicio">
    <h1 style="font-family:'Arinttika Signature', cursive; font-size:3rem;">Georgette Mora</h1>
    <p>Defensa clara y cercana para decisiones seguras</p>
  </header>

  <nav>
    <a href="#quien-soy">Qui√©n soy</a>
    <a href="#areas">√Åreas de pr√°ctica</a>
    <a href="#jurisprudencia">Jurisprudencia</a>
    <a href="#actualidad">Actualidad Legal</a>
    <a href="#contacto">Contacto</a>
  </nav>

  <section id="quien-soy">
    <h2>Qui√©n soy</h2>
    <p>Soy abogada con m√°s de 8 a√±os de experiencia en litigaci√≥n. Poseo diplomados en Litigaci√≥n Oral, Derecho Penal y Procesal Penal, y Familia e Infancia. Atiendo causas a nivel nacional en modalidad remota, y presencialmente en Arica.</p>
  </section>

  <section id="areas">
    <h2>√Åreas de pr√°ctica</h2>
    <ul>
      <li>Derecho de Familia</li>
      <li>Derecho Penal</li>
      <li>Derecho Civil</li>
      <li>Derecho Laboral (tutela, juicio ordinario y monitorio)</li>
    </ul>
  </section>

  <section id="jurisprudencia">
    <h2>Jurisprudencia comentada</h2>
    <div id="contenedor-juris"></div>
  </section>

  <section id="actualidad">
    <h2>Actualidad Legal</h2>
    <p><a href="https://www.bcn.cl/leychile/navegar?idNorma=140084" target="_blank">Ley 21.760 de Adopci√≥n en Chile</a></p>
  </section>

  <section id="contacto" style="background:url('morro-arica.jpg') no-repeat center/cover; color:white;">
    <h2>Contacto</h2>
    <p>üìç Manuel Blanco Encalada 938, Arica, Chile</p>
    <p>üìß <a href="mailto:gmora006@gmail.com" style="color:white;">gmora006@gmail.com</a></p>
    <p>üìû <a href="tel:+56993234860" style="color:white;">+56 9 9323 4860</a></p>
    <p>üí¨ <a href="https://wa.me/56993234860" target="_blank" style="color:white;">WhatsApp</a></p>

    <!-- Formulario -->
    <form id="form-consulta" name="consulta" method="POST" data-netlify="true" netlify-honeypot="bot-field">
      <input type="hidden" name="form-name" value="consulta" />
      <p style="display:none"><label>No completar <input name="bot-field" /></label></p>

      <label>Nombre:<br><input type="text" name="nombre" required></label><br><br>
      <label>Email:<br><input type="email" name="email" required></label><br><br>
      <label>Consulta:<br><textarea name="mensaje" rows="5" required></textarea></label><br><br>

      <div data-netlify-recaptcha="true"></div>
      <button type="submit" class="btn">Enviar consulta</button>
    </form>

    <!-- Mensaje de gracias inmediato -->
    <div id="gracias-inmediato" style="display:none; margin-top:20px;">
      <h3>¬°Gracias! Tu consulta fue enviada.</h3>
      <p>Responder√© a la brevedad. Puedes tambi√©n contactarme a <a href="mailto:gmora006@gmail.com">gmora006@gmail.com</a>.</p>
      <a href="#inicio" class="btn">Volver al inicio</a>
    </div>
  </section>

  <script>
    // Cargar jurisprudencia desde contenido.json
    async function cargarJuris() {
      try {
        const r = await fetch('contenido.json', { cache: 'no-store' });
        if (!r.ok) throw new Error('No se pudo cargar contenido.json');
        const data = await r.json();
        const cont = document.getElementById('contenedor-juris');
        cont.innerHTML = '';
        data.jurisprudencia.forEach(j => {
          const d = document.createElement('div');
          d.className = 'paper';
          d.innerHTML = `
            <h3>${j.titulo}</h3>
            <p><strong>${j.rol}</strong> ‚Äî ${j.fecha}</p>
            <p>${j.resumen}</p>
            <p><a href="${j.enlace_fallo}" target="_blank">Ver fallo completo</a></p>
          `;
          cont.appendChild(d);
        });
      } catch (err) {
        document.getElementById('contenedor-juris').innerHTML = "<p>No se pudo cargar jurisprudencia.</p>";
      }
    }
    cargarJuris();

    // Manejo de formulario AJAX
    (function () {
      const form = document.getElementById('form-consulta');
      const gracias = document.getElementById('gracias-inmediato');

      if (!form || !gracias) return;

      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        const data = new FormData(form);
        if (!data.get('form-name')) data.set('form-name', form.getAttribute('name') || 'consulta');

        try {
          const r = await fetch('/', { method: 'POST', body: data });
          if (!r.ok) throw new Error('Error al enviar');
          form.style.display = 'none';
          gracias.style.display = 'block';
          form.reset();
        } catch (err) {
          alert('No pudimos enviar tu consulta en este momento. Intenta nuevamente.');
          console.error(err);
        }
      });
    })();
  </script>

</body>
</html>
