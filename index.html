<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Georgette Mora – Abogada | Defensa en Tribunales</title>
  <meta name="description" content="Georgette Mora, abogada litigante. Defensa clara y cercana para decisiones seguras. Atención remota a nivel nacional y presencial en Arica." />
  <meta name="theme-color" content="#0f4f45" />

  <style>
    /* Fuente de firma para el nombre */
    @font-face{
      font-family:'Arinttika';
      src:url('ArinttikaSignature.ttf') format('truetype');
      font-weight:400;font-style:normal;font-display:swap;
    }

    /* Variables y layout base */
    :root{
      --navH: 68px;
      --green:#0f4f45; --gold:#d4af37;
      --bg:#f7f8f9; --text:#1b1f24; --muted:#6b7280;
      --paper:#fff; --contactText:#e6f4ea;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family:Arial,Helvetica,sans-serif;
      color:var(--text); background:var(--bg);
      padding-top:var(--navH);
      scroll-snap-type:y mandatory;      /* encaje por secciones */
      overscroll-behavior:contain;
    }
    :target{scroll-margin-top:calc(var(--navH) + 20px)}

    /* NAV */
    nav{
      position:fixed;top:0;left:0;right:0;z-index:1000;
      background:var(--green);border-bottom:3px solid var(--gold);
      display:flex;justify-content:center;gap:16px;flex-wrap:wrap;
      padding:12px 14px;
    }
    nav a{color:#fff;text-decoration:none;font-weight:700}
    nav a:hover{text-decoration:underline}

    /* Secciones (por defecto “en tarjeta”) */
    section{
      min-height:calc(100vh - var(--navH));
      scroll-snap-align:start;
      padding:64px 16px;
      max-width:1100px;
      margin:0 auto;
    }
    h1,h2{margin:0 0 12px}
    h2{color:var(--green)}
    .muted{color:var(--muted)}
    .paper{background:var(--paper);border-radius:14px;padding:18px;box-shadow:0 8px 24px rgba(0,0,0,.08)}

    /* INICIO (portada tipo hero dentro del ancho de sección) */
    #inicio{
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      text-align:center;color:#fff;position:relative;
      background:url('oficina.jpg') no-repeat center 40%/cover;
      border-radius:14px;
    }
    #inicio::after{content:"";position:absolute;inset:0;border-radius:14px;background:rgba(0,0,0,.42)}
    #inicio>*{position:relative;z-index:1}
    .nombre{font-family:'Arinttika',cursive;font-size:3.4rem;line-height:1}
    .claim{margin-top:10px;font-size:1.2rem}
    .pill{margin-top:10px;display:inline-block;background:rgba(0,0,0,.45);padding:10px 16px;border-radius:10px;font-weight:600}

    /* QUIÉN SOY */
    #quien-soy .qs-grid{display:grid;grid-template-columns:260px 1fr;gap:20px;align-items:start}
    #quien-soy img{width:100%;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.15)}

    /* ÁREAS — portada full-bleed (ocupa todo el ancho, mantiene snap) */
    #areas{
      max-width:none;width:100%;margin:0;padding:64px 0;
      min-height:calc(100vh - var(--navH));scroll-snap-align:start;
      border-radius:0;color:#fff;
      background:
        linear-gradient(rgba(15,79,69,.72),rgba(15,79,69,.72)),
        url("Lago Chungara.JPG") center 45%/cover no-repeat fixed;
    }
    #areas .areas-wrap{max-width:1100px;margin:0 auto;padding:0 16px}
    .areas{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-top:10px}
    .areas .box{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);border-radius:12px;padding:14px}

    /* JURISPRUDENCIA */
    #jurisprudencia .col{display:grid;gap:18px}
    .jur-card{background:#fff;border-radius:14px;padding:18px;box-shadow:0 8px 24px rgba(0,0,0,.08)}
    .jur-head{display:flex;flex-direction:column;gap:4px;margin-bottom:8px}
    .jur-title{margin:0;font-size:1.15rem}
    .jur-meta{margin:0;font-size:.9rem;color:var(--muted)}
    .jur-keywords{font-size:.85rem;color:var(--muted);margin:8px 0 0}
    .btn-link{display:inline-block;margin-top:10px;padding:10px 14px;border-radius:10px;background:var(--green);color:#fff;text-decoration:none;font-weight:700}
    .btn-link:hover{filter:brightness(.95)}

    /* DATOS ÚTILES */
    #utiles .links{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
    #utiles a{display:block;padding:12px 14px;border-radius:10px;background:#fff;border:1px solid #e7e7e7;box-shadow:0 6px 18px rgba(0,0,0,.05);text-decoration:none;color:var(--text)}
    #utiles a:hover{border-color:#dcdcdc}

    /* CONTACTO — portada full-bleed */
    #contacto{
      max-width:none;width:100%;margin:0;padding:64px 0;
      min-height:calc(100vh - var(--navH));scroll-snap-align:start;
      border-radius:0;color:var(--contactText);
      background:
        linear-gradient(rgba(0,0,0,.45),rgba(0,0,0,.45)),
        url("Morro de Arica.JPG") center 45%/cover no-repeat fixed;
    }
    #contacto .wrap{max-width:980px;margin:0 auto;background:rgba(0,0,0,.35);padding:18px;border-radius:14px}
    #contacto a{color:var(--contactText);text-decoration:underline}

    /* FORM */
    form{margin-top:16px;background:#fff;color:#1b1f24;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.15)}
    .form-body{padding:16px;display:grid;gap:12px}
    label{font-weight:600}
    input,textarea{width:100%;padding:10px;border:1px solid #dcdfe3;border-radius:8px;font-size:15px}
    .btn{background:var(--gold);color:#1b1f24;border:none;border-radius:10px;padding:10px 16px;font-weight:700;cursor:pointer}
    .btn:hover{filter:brightness(.95)}

    /* WhatsApp flotante */
    .wa{position:fixed;right:18px;bottom:18px;z-index:1100;width:56px;height:56px;border-radius:50%;background:#25D366;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px rgba(0,0,0,.25)}
    .wa svg{width:28px;height:28px;fill:#fff}

    footer{background:var(--green);color:#fff;text-align:center;padding:20px;margin-top:40px}

    @media (max-width:820px){
      :root{--navH:84px}
      #areas,#contacto{background-attachment:scroll;background-position:center 45%}
      .nombre{font-size:2.8rem}
      #quien-soy .qs-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav aria-label="Navegación principal">
    <a href="#inicio">Inicio</a>
    <a href="#quien-soy">Quién soy</a>
    <a href="#areas">Áreas de práctica</a>
    <a href="#jurisprudencia">Jurisprudencia</a>
    <a href="#actualidad">Actualidad</a>
    <a href="#utiles">Datos útiles</a>
    <a href="#contacto">Contacto</a>
  </nav>

  <!-- INICIO -->
  <section id="inicio" aria-label="Portada">
    <h1 class="nombre">Georgette Mora</h1>
    <p class="claim">Defensa clara y cercana para decisiones seguras</p>
    <p class="pill">Atención remota a nivel nacional y presencial en Arica</p>
  </section>

  <!-- QUIÉN SOY -->
  <section id="quien-soy" aria-label="Presentación">
    <h2>Quién soy</h2>
    <div class="qs-grid">
      <img src="IMG_9405.jpg" alt="Georgette Mora, abogada" loading="lazy">
      <div>
        <p><strong>Georgette Mora</strong>, abogada litigante con más de 8 años de experiencia en Derecho de Familia, Penal, Civil y Laboral. Diplomada en Litigación Oral; Violencia Intrafamiliar y Medidas de Protección; Derecho de Familia Avanzado.</p>
        <p class="muted">Acompañamiento cercano, estrategias claras y enfoque en decisiones seguras.</p>
      </div>
    </div>
  </section>

  <!-- ÁREAS (full-bleed) -->
  <section id="areas" aria-label="Áreas de práctica">
    <div class="areas-wrap">
      <h2>Áreas de práctica</h2>
      <div class="areas">
        <div class="box"><strong>Familia:</strong> medidas de protección; cuidado personal; régimen comunicacional; alimentos; divorcio; adopción.</div>
        <div class="box"><strong>Penal:</strong> defensa en investigación y juicio; procedimientos abreviados; recursos.</div>
        <div class="box"><strong>Civil:</strong> responsabilidad; juicios ejecutivos; arrendamiento.</div>
        <div class="box"><strong>Laboral:</strong> tutela laboral; juicio ordinario; monitorio.</div>
      </div>
    </div>
  </section>

  <!-- JURISPRUDENCIA (dinámica) -->
  <section id="jurisprudencia" aria-label="Jurisprudencia comentada">
    <h2>Jurisprudencia comentada</h2>
    <div id="lista-juris" class="col">
      <div class="paper"><p class="muted">Cargando jurisprudencia…</p></div>
    </div>

    <!-- Fallback embebido por si contenido.json falla -->
    <script type="application/json" id="contenido-json-fallback">
    {
      "jurisprudencia": [
        {
          "titulo": "Procedimiento abreviado y control judicial del derecho",
          "rol": "Corte de Apelaciones de Temuco, Rol N° 1554-2024",
          "fecha": "2024-09-15",
          "resumen": "En esta causa, el Ministerio Público interpuso recurso de apelación ...",
          "palabras_clave": ["procedimiento abreviado","apelación","error de derecho","control judicial"],
          "enlace_fallo": "fallo-Temuco-1554-2024.pdf"
        }
      ]
    }
    </script>
  </section>

  <!-- ACTUALIDAD -->
  <section id="actualidad" aria-label="Actualidad legal">
    <h2>Actualidad legal</h2>
    <div class="paper">
      <p><a href="https://www.bcn.cl/leychile/navegar?idNorma=140084" target="_blank" rel="noopener">Ley 21.760 de Adopción en Chile (BCN)</a></p>
    </div>
  </section>

  <!-- DATOS ÚTILES -->
  <section id="utiles" aria-label="Datos útiles">
    <h2>Datos útiles</h2>
    <div class="links">
      <a href="https://ojv.pjud.cl/kpitec-ojv-web/tramite_facil" target="_blank" rel="noopener">Trámite Fácil – Oficina Judicial Virtual</a>
      <a href="https://agenda.minpublico.cl/denuncia/" target="_blank" rel="noopener">Ministerio Público – Denuncia en línea</a>
      <a href="https://www.bcentral.cl/estadisticas" target="_blank" rel="noopener">Indicadores económicos – Banco Central de Chile</a>
    </div>
  </section>

  <!-- CONTACTO (full-bleed) -->
  <section id="contacto" aria-label="Contacto">
    <div class="wrap">
      <h2>Contacto</h2>
      <p>📍 Manuel Blanco Encalada 938, Arica, Chile</p>
      <p>📞 <a href="tel:+56993234860">+56 9 9323 4860</a></p>
      <p>✉️ <a href="mailto:gmora006@gmail.com">gmora006@gmail.com</a></p>

      <!-- Formulario Netlify -->
      <form id="form-consulta" name="consulta" method="POST" data-netlify="true" netlify-honeypot="bot-field">
        <input type="hidden" name="form-name" value="consulta" />
        <p style="display:none"><label>No completar <input name="bot-field" /></label></p>

        <div class="form-body">
          <div><label for="f-nombre">Nombre</label><input id="f-nombre" type="text" name="nombre" required></div>
          <div><label for="f-email">Correo</label><input id="f-email" type="email" name="email" required></div>
          <div><label for="f-telefono">Teléfono</label><input id="f-telefono" type="tel" name="telefono"></div>
          <div><label for="f-msg">Consulta</label><textarea id="f-msg" name="mensaje" rows="5" required></textarea></div>

          <!-- reCAPTCHA de Netlify (actívalo en Site settings → Forms) -->
          <div data-netlify-recaptcha="true"></div>

          <button type="submit" class="btn">Enviar consulta</button>
        </div>
      </form>

      <!-- Gracias inmediato -->
      <div id="gracias-inmediato" class="paper" style="display:none; margin-top:16px;">
        <h3 style="margin-top:0;color:#0f4f45">¡Gracias! Tu consulta fue enviada.</h3>
        <p>Me pondré en contacto contigo a la brevedad.</p>
        <p><a href="#inicio" class="btn" style="text-decoration:none;">Volver al inicio</a></p>
      </div>
    </div>
  </section>

  <footer role="contentinfo">
    <p>© 2025 Georgette Mora – Abogada</p>
  </footer>

  <!-- WhatsApp flotante -->
  <a class="wa" href="https://wa.me/56993234860" target="_blank" rel="noopener" aria-label="Contactar por WhatsApp">
    <svg viewBox="0 0 32 32" aria-hidden="true">
      <path d="M19.11 17.21c-.27-.14-1.56-.77-1.8-.86-.24-.09-.41-.14-.58.14-.17.27-.67.86-.82 1.04-.15.18-.3.2-.57.07-.27-.14-1.14-.42-2.17-1.35-.8-.71-1.34-1.58-1.5-1.85-.16-.27-.02-.42.12-.55.12-.12.27-.31.4-.46.13-.15.17-.27.25-.45.08-.18.05-.34-.02-.48-.07-.14-.58-1.4-.8-1.92-.21-.51-.43-.44-.58-.45l-.5-.01c-.18 0 -.47.07-.72.34-.24.27-.95.93-.95 2.26 0 1.33.97 2.62 1.1 2.8.14.18 1.9 2.9 4.6 4.06.64.28 1.14.45 1.53.57.64.2 1.22.17 1.68.1.51-.07 1.56-.64 1.78-1.26.22-.62.22-1.15.15-1.26-.06-.11-.24-.18-.5-.31zM16.03 4C9.95 4 5 8.94 5 15.01c0 2.42.7 4.67 1.92 6.56L5 28l6.64-1.74a11.01 11.01 0 0 0 4.4.89c6.07 0 11.03-4.95 11.03-11.01S22.1 4 16.03 4z"/>
    </svg>
  </a>

  <!-- Script: carga contenido.json y envío AJAX Netlify -->
  <script>
  // Render Jurisprudencia desde contenido.json (con fallback embebido)
  (async function cargarJurisprudencia(){
    const cont = document.getElementById('lista-juris');

    function render(items){
      if(!items || !items.length){
        cont.innerHTML = '<div class="paper"><p class="muted">Aún no hay comentarios de jurisprudencia publicados.</p></div>';
        return;
      }
      // Orden por fecha (desc) si hay fecha ISO (YYYY-MM-DD)
      items.sort((a,b)=>(b.fecha||'').localeCompare(a.fecha||''));
      cont.innerHTML = items.map(it=>{
        const titulo = it.titulo || 'Jurisprudencia';
        const rol = it.rol ? ` – <strong>${it.rol}</strong>` : '';
        const fecha = it.fecha ? new Date(it.fecha).toLocaleDateString('es-CL') : '';
        const resumen = (it.resumen||'').replace(/\n{2,}/g,'</p><p>');
        const tags = Array.isArray(it.palabras_clave) ? it.palabras_clave : [];
        const enlace = it.enlace_fallo;
        return `
          <article class="jur-card">
            <header class="jur-head">
              <h3 class="jur-title">${titulo}${rol}</h3>
              ${fecha ? `<p class="jur-meta">${fecha}</p>` : ''}
            </header>
            <div class="jur-body">
              <p>${resumen}</p>
              ${tags.length ? `<p class="jur-keywords">Palabras clave: ${tags.join(', ')}</p>` : ''}
              ${enlace ? `<a class="btn-link" href="${enlace}" target="_blank" rel="noopener">Ver fallo</a>` : ''}
            </div>
          </article>`;
      }).join('');
    }

    try{
      const r = await fetch('contenido.json', { cache:'no-store' });
      if(!r.ok) throw new Error('No se pudo cargar contenido.json ('+r.status+')');
      const data = await r.json();
      const items = Array.isArray(data) ? data : (data.jurisprudencia || []);
      if(!items.length) throw new Error('JSON vacío o sin "jurisprudencia"');
      return render(items);
    }catch(e){
      console.warn('Fallo contenido.json, uso fallback:', e);
    }
    try{
      const raw = document.getElementById('contenido-json-fallback')?.textContent || '{}';
      const data = JSON.parse(raw);
      const items = Array.isArray(data) ? data : (data.jurisprudencia || []);
      return render(items);
    }catch(e2){
      cont.innerHTML = `
        <div class="paper">
          <p>No pudimos cargar la jurisprudencia en este momento.</p>
          <p class="muted" style="font-size:13px">Verifica que <code>contenido.json</code> esté en la raíz y tenga formato válido.</p>
        </div>`;
    }
  })();

  // Envío AJAX a Netlify (gracias inmediato)
  (function () {
    const form = document.getElementById('form-consulta');
    const gracias = document.getElementById('gracias-inmediato');
    if (!form || !gracias) return;

    // Serializa a application/x-www-form-urlencoded
    function encode(data) {
      return Object.keys(data)
        .map(k => encodeURIComponent(k) + '=' + encodeURIComponent(data[k]))
        .join('&');
    }

    form.addEventListener('submit', async function (e) {
      e.preventDefault();
      const data = { 'form-name': form.getAttribute('name') || 'consulta' };

      // Toma todos los campos del formulario
      Array.from(form.elements).forEach(el => {
        if (!el.name) return;
        if ((el.type === 'checkbox' || el.type === 'radio')) {
          if (el.checked) data[el.name] = el.value;
        } else {
          data[el.name] = el.value;
        }
      });

      try {
        const r = await fetch('/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Accept': 'text/html,application/xhtml+xml'
          },
          body: encode(data)
        });
        if (!r.ok) throw new Error('Respuesta no OK: ' + r.status);
        form.style.display = 'none';
        gracias.style.display = 'block';
        form.reset();
      } catch (err) {
        console.error('Fallo envío Netlify:', err);
        alert('No pudimos enviar tu consulta en este momento. Intenta nuevamente.');
      }
    });
  })();
  </script>
</body>
</html>
